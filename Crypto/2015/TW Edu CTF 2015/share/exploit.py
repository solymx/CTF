#!/usr/bin/env python
import json
import libnum
import gmpy2
def common_modulus_attack(c1, c2, e1, e2, n):
    _ , s1, s2 = gmpy2.gcdext(e1, e2)
    if s1 < 0:
        s1 = -s1
        c1 = gmpy2.invert(c1, n)
    elif s2 < 0:
        s2 = -s2
        c2 = gmpy2.invert(c2, n)
    c1s1 = pow(c1, s1, n)
    c2s2 = pow(c2, s2, n)
    m = (c1s1 * c2s2) % n
    return m

with open('share.json') as f:
	data = json.loads(f.read())

m = int(common_modulus_attack(data['c1'],data['c2'],data['e1'],data['e2'],data['n']))
print libnum.n2s(m)